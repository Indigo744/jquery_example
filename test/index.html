<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
  <title>jQuery Form Example Plugin Test</title>
  <link rel="stylesheet" type="text/css" href="qunit.css">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
  <script type="text/javascript" src="metadata.js"></script>

  <!-- Include the library twice. -->
  <script type="text/javascript" src="../jquery.example.js"></script>
  <script type="text/javascript" src="../jquery.example.js"></script>
  <script type="text/javascript" src="qunit.js"></script>
</head>
<body>
  <h1 id="qunit-header">jQuery Form Example Plugin Test</h1>
  <h2 id="qunit-banner"></h2>
  <div id="qunit-testrunner-toolbar"></div>
  <h2 id="qunit-userAgent"></h2>
  <ol id="qunit-tests"></ol>
  <div id="qunit-fixture">
    <form id="basicform">
      <p><input type="text" id="basic1"></p>
      <p><input type="submit"></p>
    </form>
    <!-- <form id="customform"> -->
    <!--   <p><input type="text" id="custom1"></p> -->
    <!--   <p><input type="submit"></p> -->
    <!-- </form> -->
    <!-- <form id="callbackform"> -->
    <!--   <p><input type="text" id="callback1"></p> -->
    <!--   <p><input type="text" id="callback2" title="Starting"></p> -->
    <!--   <p><input type="submit"></p> -->
    <!-- </form> -->
    <!-- <form id="load"> -->
    <!--   <p><input type="text" id="load1" value="Already filled in"></p> -->
    <!--   <p><input type="text" id="load2" value="Default"></p> -->
    <!-- </form> -->
    <!-- <form id="metadata"> -->
    <!--   <p><input type="text" id="m1" class="{example: 'Something', className: 'm1'}"></p> -->
    <!--   <p><input type="text" id="m2" class="{example: 'Override', className: 'm2'}"></p> -->
    <!-- </form> -->
    <!-- <form id="no_focus"> -->
    <!--   <p><input type="text" id="f1"></p> -->
    <!-- </form> -->
  </div>
  <script type="text/javascript">
    $(function() {

      module("Basic usage", {
        setup: function() {
          $('#basic1').example("Test");
          $('form').submit(function(e) {
            e.preventDefault();
          });
        }
      });

      test("should have an example set", function() {
        expect(2);
        equal($('#basic1').val(), "Test", "The example should read 'Test'.");
        ok($('#basic1').hasClass('example'), "The class should be 'example'.");
      });

      test("should be cleared on focus", function() {
        expect(2);
        $('#basic1').focus();

        equal($('#basic1').val(), "", "The example should be cleared.");
        ok(!$('#basic1').hasClass('example'), "The class should no longer be 'example'.");
      });

      test("should reappear on blur if empty", function() {
        expect(2);
        $('#basic1').blur();

        equal($('#basic1').val(), "Test", "The example should read 'Test'.");
        ok($('#basic1').hasClass('example'), "The class should be 'example'.");
      });

      test("should not be populated with an example on blur if user input is present", function() {
        expect(2);
        $('#basic1').focus().val("My own value").blur();

        equal($('#basic1').val(), "My own value", "The example should not be cleared.");
        ok(!$('#basic1').hasClass('example'), "The class should not be 'example'.");
      });

      test("should not be populated with an example on focus if user input is present", function() {
        expect(2);
        $('#basic1').focus().val("My own value").blur().focus();

        equal($('#basic1').val(), "My own value", "The example should not be cleared.");
        ok(!$('#basic1').hasClass('example'), "The class should not be 'example'.");
      });

      test("should be cleared on form submit", function() {
        expect(1);
        console.log($('#basic1').val(), $('#basic1').attr('class'));
        $('#basicform').triggerHandler('submit');
        console.log($('#basic1').val(), $('#basic1').attr('class'));

        equal($('#basic1').val(), "", "The example should be cleared.");
      });

      test("shouldn't clear user inputs on form submit", function() {
        $('#basic1').focus();
        $('#basic1').val("User input");
        $('#basicform').triggerHandler('submit');

        equal($('#basic1').val(), "User input", "The user input should be intact.");
      });

    //   module("Using custom classes", {
    //     setup: function() {
    //       $('#custom1').example("Test", {className: "notExample"});
    //     }
    //   });
    //   test("should have an example set", function() {
    //     equal($('#custom1').val(), "Test", "The example should be set.");
    //     ok($('#custom1').hasClass('notExample'), "The class should be the specified one.");
    //     ok(!$('#custom1').hasClass('example'), "The class should not be 'example'.");
    //   });
    //   test("should be cleared on focus", function() {
    //     $('#custom1').focus();

    //     equal($('#custom1').val(), "", "The example should be cleared.");
    //     ok(!$('#custom1').hasClass('notExample'), "The class should not be the specified one.");
    //   });
    //   test("should be reappear on blur", function() {
    //     $('#custom1').blur();

    //     equal($('#custom1').val(), "Test", "The example should reappear.");
    //     ok($('#custom1').hasClass('notExample'), "The class should be the specified one.");
    //   });

    //   module("Multiple forms");
    //   test("should only clear examples in that form", function() {
    //     $('#customform').triggerHandler('submit');

    //     equal($('#custom1').val(), "", "The example should be cleared.");
    //     equal($('#basic1').val(), "Test", "An example in another form should not be cleared.");
    //   });

    //   module("Simple callback");
    //   test("should have an example set", function() {
    //     $('#callback1').example(function() { return "Callback Test" });

    //     equal($('#callback1').val(), "Callback Test", "The example should read 'Callback Test'.");
    //     ok($('#callback1').hasClass('example'), "The class should be 'example'.");
    //   });
    //   test("should be cleared on focus", function() {
    //     $('#callback1').focus();

    //     equal($('#callback1').val(), "", "The example should be cleared.");
    //     ok(!$('#callback1').hasClass('example'), "The class should no longer be 'example'.");
    //   });
    //   test("should reappear on blur if empty", function() {
    //     $('#callback1').blur();

    //     equal($('#callback1').val(), "Callback Test", "The example should read 'Callback Test'.");
    //     ok($('#callback1').hasClass('example'), "The class should be 'example'.");
    //   });

    //   module("More complicated callback");
    //   test("should have an example set", function() {
    //     $('#callback2').example(function() {
    //       return $(this).attr('title');
    //     });

    //     equal($('#callback2').val(), "Starting", "The example should read 'Starting'.");
    //     ok($('#callback2').hasClass('example'), "The class should be 'example'.");
    //   });
    //   test("should be cleared on focus", function() {
    //     $('#callback2').focus();

    //     equal($('#callback2').val(), "", "The example should be cleared.");
    //     ok(!$('#callback2').hasClass('example'), "The class should no longer be 'example'.");
    //   });
    //   test("should reappear on blur if empty", function() {
    //     $('#callback2').blur();

    //     equal($('#callback2').val(), "Starting", "The example should read 'Starting'.");
    //     ok($('#callback2').hasClass('example'), "The class should be 'example'.");
    //   });
    //   test("should run the callback every time instead of caching it", function() {
    //     $('#callback2').attr('title', 'Another');
    //     $('#callback2').focus();
    //     $('#callback2').blur();

    //     equal($('#callback2').val(), "Another", "The example should read 'Another'.");
    //     ok($('#callback2').hasClass('example'), "The class should be 'example'.");
    //   });

    //   module("On page load");
    //   test("should not set an example if a value is already set", function() {
    //     $('#load1').example("Test");

    //     equal($('#load1').val(), "Already filled in", "The example should not be set.");
    //     ok(!$('#load1').hasClass('example'), "The class should not be 'example'.");
    //   });
    //   test("should not clear a field with a value even when using a callback", function() {
    //     $('#load2').example(function() {
    //       return "Nope";
    //     });

    //     equal($('#load2').val(), "Default", "The value should be the default.");
    //     ok(!$('#load2').hasClass('example'), "The class should not be 'example'.");
    //   });

    //   module("Metadata plugin");
    //   test("should have an example set", function() {
    //     $('#m1').example();

    //     equal($('#m1').val(), "Something", "The example should read 'Something'.");
    //     ok($('#m1').hasClass('m1'), "The class should be 'm1'.");
    //   });
    //   test("should be cleared on focus", function() {
    //     $('#m1').focus();

    //     equal($('#m1').val(), "", "The example should be cleared.");
    //     ok(!$('#m1').hasClass('m1'), "The class should no longer be 'm1'.");
    //   });
    //   test("should reappear on blur if empty", function() {
    //     $('#m1').blur();

    //     equal($('#m1').val(), "Something", "The example should read 'Something'.");
    //     ok($('#m1').hasClass('m1'), "The class should be 'm1'.");
    //   });
    //   test("should be overridden by arguments", function() {
    //     $('#m2').example('Precedence', {className: 'o1'});

    //     equal($('#m2').val(), "Precedence", "The example in the arguments should take precedence");
    //     ok($('#m2').hasClass('o1'), "The class should be 'o1'.");
    //   });

    //   module("Changing values by Javascript");
    //   test("should set example", function() {
    //     $('#f1').example('Example');

    //     equal($('#f1').val(), "Example", "The example should read 'Example'.");
    //     ok($('#f1').hasClass('example'), "The example class should be set.");
    //   });
    //   test("should remove example class when changed", function() {
    //     $('#f1').val("New value");
    //     $('#f1').change();

    //     equal($('#f1').val(), "New value", "Value should be changed to 'New value'.");
    //     ok(!$('#f1').hasClass('example'), "The example class should no longer be set.");
    //   });
    });
  </script>
</body>
</html>
